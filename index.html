<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exhibit Canvas</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div id="initial-screen" class="initial-screen">
            <h2>Exhibit Canvas 시작하기</h2>
            <button class="button button-primary" onclick="startNewProject()">프로젝트 생성하기</button>
            <button class="button button-secondary" onclick="loadExistingProject()">프로젝트 불러오기</button>
        </div>

        <div class="header">
            <h1>🖼️ Exhibit Canvas</h1>
            <div class="subtitle">전시할 가벽을 생성하고 액자를 배치한 후, 평면도에서 전시 공간을 설계하세요</div>
        </div>

        <!-- 탭 네비게이션 -->
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('wall-editor')">🖼️ 벽 관리</button>
            <button class="tab-button" onclick="switchTab('floor-plan')">📐 평면도</button>
        </div>

        <!-- 벽 관리 탭 -->
        <div id="wall-editor" class="tab-content active">
            <div class="main-content">
                <div class="controls">
                    <div class="control-section">
                        <h3>벽 선택</h3>
                        <select id="wallSelect" onchange="switchWall()">
                            <option value="">가벽 생성</option>
                        </select>
                        <input type="text" id="wallName" placeholder="벽 이름 (예: A벽, 정면벽)" maxlength="20">
                        <button class="button button-primary" onclick="createOrUpdateWall()">벽 저장</button>
                        <button class="button button-danger" onclick="deleteCurrentWall()">현재 벽 삭제</button>
                    </div>

                    <div class="control-section">
                        <h3>벽 크기</h3>
                        <div class="control-group">
                            <label>벽 너비 (cm)</label>
                            <input type="number" id="wallWidth" value="400" min="100" max="1000">
                        </div>
                        <div class="control-group">
                            <label>벽 높이 (cm)</label>
                            <input type="number" id="wallHeight" value="300" min="100" max="500">
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>액자 추가</h3>
                        <div class="control-group">
                            <label>액자 너비 (cm)</label>
                            <input type="number" id="frameWidth" value="60" min="10" max="200">
                        </div>
                        <div class="control-group">
                            <label>액자 높이 (cm)</label>
                            <input type="number" id="frameHeight" value="80" min="10" max="200">
                        </div>
                        <button class="button button-primary" onclick="addFrame()">액자 추가</button>
                        <button class="button button-secondary" onclick="clearAllFrames()">액자 전체 삭제</button>
                    </div>

                    <div class="control-section">
                        <div class="grid-toggle">
                            <input type="checkbox" id="gridToggle" onchange="toggleGrid()">
                            <label for="gridToggle">그리드 표시 (50cm)</label>
                        </div>
                    </div>

                    <div class="info-panel">
                        <h3>📊 정보</h3>
                        <div class="info-item">액자 개수: <strong id="frameCount">0</strong></div>
                        <div class="info-item">벽 크기: <strong id="wallSize">400 × 300 cm</strong></div>
                    </div>
                </div>

                <div class="workspace">
                    <div id="wall" class="wall"></div>
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomWallEditor(-0.1)">−</button>
                        <span id="wallEditorZoomValue">100%</span>
                        <button class="zoom-btn" onclick="zoomWallEditor(0.1)">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 평면도 탭 -->
        <div id="floor-plan" class="tab-content">
            <div class="main-content">
                <div class="controls">
                    <div class="control-section">
                        <h3>공간 설정</h3>
                        <div class="control-group">
                            <label>공간 너비 (cm)</label>
                            <input type="number" id="spaceWidth" value="800" min="400" max="2000">
                        </div>
                        <div class="control-group">
                            <label>공간 높이 (cm)</label>
                            <input type="number" id="spaceHeight" value="600" min="400" max="2000">
                        </div>
                        <button class="button button-primary" onclick="updateFloorPlan()">공간 크기 적용</button>
                    </div>

                    <div class="control-section">
                        <h3>벽 추가</h3>
                        <div id="wallList"></div>
                    </div>

                    <div class="control-section">
                        <h3>저장/불러오기</h3>
                        <button class="button" style="background: #27ae60; color: white;" onclick="saveProject()">💾 프로젝트 저장</button>
                        <button class="button" style="background: #f39c12; color: white;" onclick="document.getElementById('projectFileInput').click()">📂 프로젝트 불러오기</button>
                        <input type="file" id="projectFileInput" accept=".json" style="display: none;" onchange="loadProject(event)">
                    </div>

                    <div class="info-panel">
                        <h3>💡 사용법</h3>
                        <div class="info-item">• 벽을 드래그하여 배치</div>
                        <div class="info-item">• 벽을 클릭하여 선택</div>
                        <div class="info-item">• 회전 핸들로 각도 조정</div>
                        <div class="info-item">• 스페이스바 + 드래그로 캔버스 이동 </div>
                        <div class="info-item">• alt + 마우스 휠로 캔버스 확대 및 축소</div>
                        <div class="info-item">• X 버튼으로 삭제</div>
                    </div>
                </div>

                <div class="workspace">
                    <div id="floorPlanCanvas" class="floor-plan-canvas"></div>
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomFloorPlan(-0.1)">−</button>
                        <span id="floorPlanZoomValue">100%</span>
                        <button class="zoom-btn" onclick="zoomFloorPlan(0.1)">+</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>